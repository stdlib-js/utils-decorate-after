{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2022 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isFunction from '@stdlib/assert-is-function' ;\nimport { isPrimitive as isNonNegativeInteger } from '@stdlib/assert-is-nonnegative-integer' ;\nimport format from '@stdlib/error-tools-fmtprodmsg' ;\n\n\n// FUNCTIONS //\n\n/**\n* Applies provided arguments to a function and passes the result to another function.\n*\n* @private\n* @param {Function} fcn - function\n* @param {Array} args - function arguments\n* @param {Function} after - function to invoke with the result of `fcn`\n* @param {*} thisArg - evaluation context for `after`\n* @returns {*} result\n*/\nfunction apply( fcn, args, after, thisArg ) {\n\tvar r1 = fcn.apply( null, args );\n\tvar r2 = after.call( thisArg, r1 );\n\treturn ( r2 === void 0 ) ? r1 : r2;\n}\n\n\n// MAIN //\n\n/**\n* Decorates a provided function such that the function's return value is provided as an argument to another function.\n*\n* @param {Function} fcn - function to decorate\n* @param {NonNegativeInteger} arity - number of parameters\n* @param {Function} after - function to invoke with the result of the decorated function\n* @param {*} [thisArg] - evaluation context for `after`\n* @throws {TypeError} first argument must be a function\n* @throws {TypeError} second argument must be a nonnegative integer\n* @throws {TypeError} third argument must be a function\n* @returns {Function} decorator\n*\n* @example\n* import abs from '@stdlib/math-base-special-abs' ;\n*\n* function negate( v ) {\n*     return -v;\n* }\n*\n* var f = decorateAfter( abs, 1, negate );\n* // returns <Function>\n*\n* var v = f( -5 );\n* // returns -5\n*\n* v = f( 5 );\n* // returns -5\n*\n* @example\n* import abs from '@stdlib/math-base-special-abs' ;\n*\n* function log( v ) {\n*     console.log( v );\n* }\n*\n* var f = decorateAfter( abs, 1, log );\n* // returns <Function>\n*\n* var v = f( -5 );\n* // returns 5\n*\n* v = f( 5 );\n* // returns 5\n*\n* @example\n* import abs from '@stdlib/math-base-special-abs' ;\n*\n* function counter() {\n*     this.count += 1;\n* }\n*\n* var ctx = {\n*     'count': 0\n* };\n*\n* var f = decorateAfter( abs, 1, counter, ctx );\n* // returns <Function>\n*\n* var v = f( -5 );\n* // returns 5\n*\n* v = f( 5 );\n* // returns 5\n*\n* var count = ctx.count;\n* // returns 2\n*/\nfunction decorateAfter( fcn, arity, after, thisArg ) {\n\tvar fcns;\n\tvar f;\n\tif ( !isFunction( fcn ) ) {\n\t\tthrow new TypeError( format( 'null3p', fcn ) );\n\t}\n\tif ( !isFunction( after ) ) {\n\t\tthrow new TypeError( format( 'null3Z', after ) );\n\t}\n\t// NOTE: we select a specific signature so that `fcn.length` is preserved, thus matching the definition of a \"decorator\" where the decorator function should be transparent to external clients (i.e., have a matching signature). While more recent JavaScript environments allow `Function.prototype.length` to be configurable, older environments do not and error when attempting to manually specify the value for a function's length. We cap support for matching signature length as signatures with many parameters are likely to be exceedingly rare, especially when used in conjunction with this API...\n\tfcns = [ fN, f1, f2, f3, f4, f5, f6, f7, f8, f9, f10 ];\n\tif ( !isNonNegativeInteger( arity ) ) {\n\t\tthrow new TypeError( format( 'null3k', arity ) );\n\t}\n\tif ( arity < fcns.length ) {\n\t\tf = fcns[ arity ];\n\t} else {\n\t\tf = fN;\n\t}\n\treturn f;\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {...*} [args] - arguments\n\t* @returns {*} result\n\t*/\n\tfunction fN() {\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @returns {*} result\n\t*/\n\tfunction f1( x0 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\t// NOTE: the use of a `for` loop is intentional (both here and below), as JavaScript does not require that only a fix number of arguments be provided; the number of provided arguments may be more or less than the signature specifies.\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @returns {*} result\n\t*/\n\tfunction f2( x0, x1 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @returns {*} result\n\t*/\n\tfunction f3( x0, x1, x2 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @returns {*} result\n\t*/\n\tfunction f4( x0, x1, x2, x3 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @returns {*} result\n\t*/\n\tfunction f5( x0, x1, x2, x3, x4 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @param {*} x5 - sixth argument\n\t* @returns {*} result\n\t*/\n\tfunction f6( x0, x1, x2, x3, x4, x5 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @param {*} x5 - sixth argument\n\t* @param {*} x6 - seventh argument\n\t* @returns {*} result\n\t*/\n\tfunction f7( x0, x1, x2, x3, x4, x5, x6 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @param {*} x5 - sixth argument\n\t* @param {*} x6 - seventh argument\n\t* @param {*} x7 - eighth argument\n\t* @returns {*} result\n\t*/\n\tfunction f8( x0, x1, x2, x3, x4, x5, x6, x7 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @param {*} x5 - sixth argument\n\t* @param {*} x6 - seventh argument\n\t* @param {*} x7 - eighth argument\n\t* @param {*} x8 - ninth argument\n\t* @returns {*} result\n\t*/\n\tfunction f9( x0, x1, x2, x3, x4, x5, x6, x7, x8 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n\n\t/**\n\t* Evaluates a function and passes the result to another function.\n\t*\n\t* @private\n\t* @param {*} x0 - first argument\n\t* @param {*} x1 - second argument\n\t* @param {*} x2 - third argument\n\t* @param {*} x3 - fourth argument\n\t* @param {*} x4 - fifth argument\n\t* @param {*} x5 - sixth argument\n\t* @param {*} x6 - seventh argument\n\t* @param {*} x7 - eighth argument\n\t* @param {*} x8 - ninth argument\n\t* @param {*} x9 - tenth argument\n\t* @returns {*} result\n\t*/\n\tfunction f10( x0, x1, x2, x3, x4, x5, x6, x7, x8, x9 ) { // eslint-disable-line no-unused-vars\n\t\tvar args;\n\t\tvar i;\n\n\t\targs = [];\n\t\tfor ( i = 0; i < arguments.length; i++ ) {\n\t\t\targs.push( arguments[ i ] );\n\t\t}\n\t\treturn apply( fcn, args, after, thisArg );\n\t}\n}\n\n\n// EXPORTS //\n\nexport default decorateAfter;\n"],"names":["apply","fcn","args","after","thisArg","r1","r2","call","decorateAfter","arity","fcns","isFunction","TypeError","format","fN","x0","i","arguments","length","push","x1","x2","x3","x4","x5","x6","x7","x8","x9","isNonNegativeInteger"],"mappings":"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"}